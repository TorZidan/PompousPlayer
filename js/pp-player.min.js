/*
 Pompous Player v26.

 @license Copyright (c) 2020 Pompous Media LLC. All rights reserved.
 Subject to the terms at 
 https://github.com/TorZidan/PompousPlayer/blob/master/STANDARD_LICENSE 
 and https://www.pompousphotos.com/commercial_license
*/
'use strict';function ra(d,g=1){if(!d)return String(d);switch(typeof d){case "string":return"'"+d+"'";case "function":return d.name||d.toString();case "object":var k=Array(g||1).join("\t"),h=Array.isArray(d);return"{["[+h]+Object.keys(d||{}).map(function(u){return"\n\t"+k+u+": "+ra(d[u],(g||1)+1)}).join(",")+"\n"+k+"}]"[+h];default:return d.toString()}}
function Da(d){if("string"==typeof d)return document.evaluate(d,document,null,0,null);if(!d||1!=d.nodeType)return"";if(d.id)return"//*[@id='"+d.id+"']";var g=[].filter.call(d.parentNode.children,function(k){return k.tagName==d.tagName});return Da(d.parentNode)+"/"+d.tagName.toLowerCase()+(1<g.length?"["+([].indexOf.call(g,d)+1)+"]":"")}
function W(d,g){const k=d[g];if(k)try{k.call(d)}catch(h){console.warn("The call to function '"+g+"()' errored out: "+h.message+". Ignoring it and continuing.")}else console.warn("No such function: '"+g+"()' !")}class Pa extends HTMLDivElement{}window.customElements.define("pannellum-3d-panorama",Pa,{extends:"div"});const Qa=new Map;
function Ra(d){if(d)if(d=d.target.closest("[data-pompous-player-stage]")){if(d=Qa.get(d))return d;console.error("Could not find the stage DOM element! Ignoring this event.")}else console.error("The 'getPpPlayer(event)' function can be used only in html code that is inside the 'stage' DOM element. Is this the case? We could not find that element! Ignoring this event.");else console.error("The event is undefined! Ignoring it.")}window.getPpPlayer=Ra;
window.getPpSkin=function(d){return(d=Ra(d))?d.getPompousEventNotifier():void 0};window.getAllPpPlayers=function(){return Array.from(Qa.values())};
class ib{constructor(d){function g(a){window.console.info&&3<=Ea&&(u(a,window.console.info),Q(a))}function k(a){window.console.warn&&2<=Ea&&(u(a,window.console.warn),Q(a))}function h(a,b=!0){window.console.error&&1<=Ea&&(a instanceof Error?u(a.stack,window.console.error):u(a,window.console.error));if(b){if(a instanceof Error)throw a;throw Error("There was an error. Cannot continue! "+a);}Q(a)}function u(a,b){a=D&&B?"P+"+((Date.now()-D)/1E3).toFixed(3)+" : "+a:D&&!B?"B+"+((Date.now()-D)/1E3).toFixed(3)+
" : "+a:Sa?"N+"+((Date.now()-Sa)/1E3).toFixed(3)+" : "+a:"N+ : "+a;b(a);Q(a)}function Q(a){if(!0===v.logToServer){a instanceof Error&&(a=a.stack);1E3<a.length&&(a=a.substr(0,1E3)+" ...");const b=new XMLHttpRequest;b.open("GET","/api/log_from_js_client?log="+encodeURIComponent(a));b.setRequestHeader("Content-Type","text/plain");b.onload=function(){};b.send()}}function ba(a){var b=0,c=[],e=-1,f=0,l=[],p=!1,n=0;for(let q=0;q<a.length;q++)a[q].c!=e&&0!=l.length&&(p&&b++,a[q].w=n,c.push({w:n,u:l,c:e,H:f,
played:!1,O:!p,wa:b}),n++,g("Pushed "+l.length+" animations all with a delay of "+e+", longestAnimDurationMs="+f+", isSkippable="+!p+"; displayIndex="+b),l=[],p=!1),l.push(a[q]),a[q].w=n,a[q].K&&(a[q].K.w=n),a[q].O||(p=!0),e=a[q].c,a[q].K&&a[q].K.j>f&&(f=a[q].K.j);0!=l.length&&(p&&b++,c.push({w:n++,u:l,c:e,H:f,played:!1,O:!p,wa:b}),g("Pushed "+l.length+" animations all with a delay of "+e+", longestAnimDurationMs="+f+", isSkippable="+!p+"; displayIndex="+b));g("There are "+c.length+" grouped animations.");
a=-1;for(b=c.length-1;0<=b;b--)c[b].O||(c[b].Ha=a,a=b);for(a=0;a<c.length;a++)g("group "+a+" has nextNonSkippableGroupId="+c[a].Ha);return c}function sa(a){var b=[];for(let c=0;c<a.length;c++)a[c].O||b.push(a[c]);return b}function ma(a,b,c){var e=!1,f=0;a.hasAttribute("data-classes")||h("Internal error: The dom element should have the 'data-classes' attribute, but it doesn't!");const l=a.getAttribute("data-classes").split(",").map(p=>p.trim());for(let p of l)if(0!==p.length){e=kb(p,a);for(const n of e)n.Da=
f,n.Ca=c.id,b.u.push({c:n.c,La:p,K:n,ra:b.ra,Da:f,Ca:c.id,O:n.O}),f++,c.id++,n.c+n.j>t&&(t=n.c+n.j);e=!0}return e}function la(a){return K.querySelector("[data-actor-id=actor"+a+"]")}function na(a,b,c){if(a){a=a.replace(/\./g,"");a=a.replace(/,/g," ");a=a.match(/\S+/g)||[];for(let f=0;f<a.length;f++){var e=a[f];""!==e&&(c&&!lb("."+e)&&h("Class '"+e+"' not found ! The animation may not play properly."),b.classList.add(e),g("Applied initial CSS class '"+e+"'"))}}}function H(){if(void 0===z)k("Called jumpAudioAndVideos() while requestingJumpToOffsetFromStartMs is undefined. This is not a valid case. Will do nothing.");
else{for(var a of V)if(a.requestingPlayOrPause=void 0,z>=a.T&&z<a.ja){const b=(z-a.T)/1E3+a.videoStartOffsetInSeconds;x?oa(a,b,!1):(!1===a.videoDomElement.paused&&(a.videoDomElement.pause(),a.currentState=M.paused,W(w,"videoPlayPaused")),a.videoDomElement.currentTime=b)}else!1===a.videoDomElement.paused&&(a.videoDomElement.pause(),a.currentState=M.paused,W(w,"videoPlayPaused"));for(const b of Z)b.requestingPlayOrPause=void 0,z>=b.ga&&z<b.ua&&(a=b.na-(z-b.ga)/1E3*b.ia,a=(a+180)%360-180,b.pannellumViewer.stopAutoRotate(),
b.pannellumViewer.stopMovement(),b.pannellumViewer.setYaw(a,!1),x&&b.pannellumViewer.startAutoRotate(b.ia,b.pitch))}}function oa(a,b,c){void 0===a.currentState&&k("In startPlayingAudioOrVideo: the state of this "+a.videoDomElement.tagName.toLowerCase()+" is "+a.currentState+".");!1===a.videoDomElement.paused&&c||(!1===a.videoDomElement.loop&&a.videoStartOffsetInSeconds>a.videoDomElement.duration?(!1===a.videoDomElement.paused&&(a.videoDomElement.pause(),a.currentState=M.paused),a.videoDomElement.currentTime=
a.videoDomElement.duration,W(w,"videoPlayPaused")):a.currentState!==M.ma?(!1===a.videoDomElement.paused&&(a.videoDomElement.pause(),a.currentState=M.paused,W(w,"videoPlayPaused")),a.videoDomElement.currentTime=b,a.currentState=M.ma,N++,W(w,"waitingForVideoToPlay"),b=a.videoDomElement.play(),void 0!==b?b.then(()=>{a.currentState=M.ha;N--;W(w,"videoPlayStarted")}).catch(e=>{a.currentState=M.paused;N--;{const f=w.videoPlayErrored;if(f)try{f.call(w,e)}catch(l){console.warn("The call to function 'videoPlayErrored(arg1)' errored out: "+
l.message+". Ignoring it and continuing.")}else console.warn("No such function: 'videoPlayErrored()' !")}k("Could not start playing "+a.videoDomElement.tagName.toLowerCase()+" "+a.videoDomElement.id+" properly: "+e+"; it currently has muted="+a.videoDomElement.muted)}):(a.currentState=M.ha,N--,W(w,"videoPlayStarted"))):k("Requesting to start playing an html5 "+a.videoDomElement.tagName.toLowerCase()+", but another request is already underway! Ignoring this one. video.currentState is "+a.currentState))}
function O(a){w.progressUpdate&&w.progressUpdate(null,-1==a?0:a==m.J.length?t:m.J[a].c,t,!x);w.onPrevOrNextAnimationChange(x,a,m.J.length,m.J[a]?m.J[a].wa:0)}function R(){fa&&(clearTimeout(fa),fa=void 0)}function L(){document.addEventListener("visibilitychange",()=>{var a=Date.now(),b=a-Ta;Ta=a;document.hidden?(g("At "+new Date+" browser tab became inactive; it was active for "+b/1E3+" seconds."),Fa=x,R(),x&&!I&&(E=S-D,ca=da=x=!1,w.playPaused(E,t)),T(!1)):(g("At "+new Date+" browser tab became active; it was inactive for "+
b/1E3+" seconds."),Fa&&!I&&(Fa=!1,ta(void 0)))});document.addEventListener("fullscreenchange",Ua,!1);document.addEventListener("webkitfullscreenchange",Ua,!1)}function T(a){for(const b of V)b.requestingPlayOrPause=void 0,!1===b.videoDomElement.paused&&(b.videoDomElement.pause(),b.currentState=M.paused,a&&(b.videoDomElement.currentTime=b.videoDomElement.duration),W(w,"videoPlayPaused"));for(const b of Z)b.requestingPlayOrPause=void 0,b.pannellumViewer.stopAutoRotate(),b.pannellumViewer.stopMovement(),
a&&b.pannellumViewer.setYaw(b.na,!1)}function ua(){if(Y){var a=x;x=!1;E=0;P=I=!1;E=D=void 0;B=!0;R();T(!0);Va();w.reset(0<V.length,X);w.progressUpdate&&w.progressUpdate(null,0,t,!0);a||U?ta(!0):E=0;U=!1}else k("Requesting reset from beginning before init finished. Ignoring it.")}function ea(a){if(va){var b=.9*a.volume;.1>=b?(a.volume=0,a.pause(),a.volume=1,va&&(clearTimeout(va),va=void 0)):(a.volume=b,va=setTimeout(()=>{ea(a)},100))}else k("Returning in fadeAudioOutRecursive, looks like some wants to interrupt the fade audio out.")}
function mb(){var a=document.getElementById(v.stageId+"-audio");a&&(va=1,ea(a))}function nb(){var a=0,b=v.loadNImagesAhead&&-1!=v.loadNImagesAhead?v.loadNImagesAhead:m.J.length;for(let c=0;c<m.M.length;c++){const e=m.M[c].xa;if(!0===m.M[c].sa){e.includes("image")&&a++;continue}if(a>=b)break;e.includes("image")&&a++;m.M[c].sa=!0;const f=la(c);na(e,f,!1);Wa(e,f)}}function Wa(a,b){var c=Xa(a);const e=c["--pp-width"];if(void 0!=e)if(g("Found "+e+" width in "+a),e.endsWith("%")){const f=e.substr(0,e.length-
1);isNaN(f)?k('Expected a number here: "--pp-width:'+e+'", but found: '+f):b.style.width=Math.round(K.clientWidth*parseInt(f,10)/100)+"px"}else k("Could not parse: --pp-width:"+e);c=c["--pp-height"];void 0!=c&&(g("Found "+c+" height in "+a),c.endsWith("%")?(a=c.substr(0,c.length-1),isNaN(a)?k('Expected a number here: "--pp-width:'+c+'", but found: '+a):b.style.height=Math.round(K.clientHeight*parseInt(a,10)/100)+"px"):k("Could not parse: --pp-width:"+e))}function Va(){for(let a=0;a<m.u.length;a++){const b=
m.u[a].K;b&&(window.getComputedStyle(b.D,null),b.D.removeAttribute("style"),b.Fa=void 0,b.Ga=void 0,b.aa=void 0,b.Qa=void 0,b.P=!1,b.R=!1,b.ta=void 0);b.video&&(b.video.currentState=M.paused,b.video.requestingPlayOrPause=void 0);b.X&&(b.X.currentState=M.paused,b.X.requestingPlayOrPause=void 0)}}function ta(a){if(x)k("play() requested, but we're already playing. Ignoring it.");else if(!0!==a||!I)if(!1!==a||!P){da=x=!0;ca=!1;void 0!==a&&a!=B&&(ha=!0);R();!1===a&&I&&(I=!1);!0===a&&P&&(P=!1);if(!Ga&&
!Ga){for(let b=0;b<m.M.length;b++){if(!0===m.M[b].sa)continue;m.M[b].sa=!0;const c=la(b),e=m.M[b].xa;na(e,c,!1);Wa(e,c)}Ga=!0}ob(a||B,z||E||0)}}function ob(a,b){if(Ya){Ya=!1;for(const f of V){void 0===f.currentState&&k("The state of this "+f.videoDomElement.tagName.toLowerCase()+" is undefined! This shouldn't happen.");if(f.currentState===M.ma||f.currentState===M.ha)continue;f.videoDomElement.pause();f.videoDomElement.currentTime=0;const l=a&&b>=f.T&&b<f.ja;l?f.videoDomElement.muted=X:f.videoDomElement.muted=
!0;f.currentState=M.ma;N++;W(w,"waitingForVideoToPlay");var c=f.videoDomElement.play();void 0!==c?c.then(()=>{N--;l?(f.videoDomElement.muted=X,f.currentState=M.ha,W(w,"videoPlayStarted")):(f.videoDomElement.pause(),f.videoDomElement.muted=X,f.currentState=M.paused,W(w,"videoPlayPaused"))}).catch(p=>{k("In first play attempt: could not start playing "+f.videoDomElement.tagName.toLowerCase()+" "+f.videoDomElement.id+" properly: "+p+"; it currently has muted="+f.videoDomElement.muted);N--;f.currentState=
M.paused;W(w,"videoPlayPaused")}):(f.currentState=M.ha,N--,f.videoDomElement.pause())}}else{for(var e of V)e.requestingPlayOrPause=void 0,a&&b>=e.T&&b<e.ja&&oa(e,(b-e.T)/1E3+e.videoStartOffsetInSeconds,!1);for(c of Z)c.requestingPlayOrPause=void 0,a&&b>=c.ga&&b<c.ua&&(e=c.na-(b-c.ga)/1E3*c.ia,e=(e+180)%360-180,c.pannellumViewer.stopAutoRotate(),c.pannellumViewer.stopMovement(),c.pannellumViewer.setYaw(e,!1),c.pannellumViewer.startAutoRotate(c.ia,c.pitch))}}function Aa(){x?k("Ignoring restartFromBenginningIfNeeded() request; we are currently playing."):
(mb(),R(),v.autoRestartAtEnd&&I&&U&&!x?fa=setTimeout(()=>{fa&&(fa=void 0,ua())},2E3):v.autoRestartAtStart&&P&&U&&!x&&(fa=setTimeout(()=>{fa&&(fa=void 0,ua())},2E3)))}function Ua(){null==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)?w.fullScreenChanged(!1):w.fullScreenChanged(!0)}function lb(a){var b=!1;$.each(window.document.styleSheets,function(){try{$.each(this.cssRules||this.rules,function(){this.selectorText&&this.selectorText==a&&(b=!0);this.selectorText&&
this.selectorText.startsWith(a+" ")&&(b=!0);this.selectorText&&this.selectorText.startsWith(a+">")&&(b=!0)})}catch(c){if("SecurityError"!==c.name&&"InvalidAccessError"!==c.name&&"Error"!=c.name)throw k("There was an error: "+c+"; the error name is '"+c.name+"'"),c;k("Swallowing this error while parsing stylesheets and continuing: "+c)}});return b}function Xa(a){if(0===a.length)return{};const b={};a=a.trim();if(!a.includes(" ")&&!a.includes(",")){g("Common use case: classesSeparatedBySpaceStr="+a);
a=Za(a);for(var c=0;c<a.style.length;c++){var e=a.style.item(c).trim(),f=a.style.getPropertyValue(e).trim();b[e]=f}return b}c=a.replace(/\./g,"");c=c.replace(/,/g," ");e=c.match(/\S+/g)||[];for(f=0;f<e.length;f++){const l=Za(e[f]);for(let p=0;p<l.style.length;p++){const n=l.style.item(p).trim(),q=l.style.getPropertyValue(n).trim();b[n]=q}}g("Non-common use case: classesSeparatedBySpaceStr="+a+", classesToFind="+c+"; result="+JSON.stringify(b));return b}function Za(a){a="."+a;for(let e=0;e<document.styleSheets.length;e++){var b=
document.styleSheets[e];if(!b.href||!b.href.includes("fontawesome")){try{var c=b.cssRules||b.rules}catch(f){k("Could not access the css in stylesheet '"+b.href+"' ! Skipping it. This happens in Firefox...");continue}for(b=0;b<c.length;b++)if(c[b].selectorText===a&&1===c[b].type)return c[b]}}h("Could not find definition for CSS class name '"+a+"'!")}function $a(a){if("VIDEO"===a.tagName||"AUDIO"===a.tagName){for(const b of V)if(b.videoDomElement===a)return b;a={videoDomElement:a,videoStartOffsetInSeconds:pb(a),
currentState:M.paused,requestingPlayOrPause:void 0};V.push(a);return a}}function ab(a){if("PANNELLUM-3D-PANORAMA"===a.tagName){for(var b of Z)if(b.za===a)return b;if("undefined"===typeof pannellum)Z.push({za:a});else{var c=a.getAttribute("src");c||h("pannellum-3d-panorama's 'src' attribute is missing or empty!");var e=a.getAttribute("speed");b=-5;e&&!isNaN(parseFloat(e))?b=parseFloat(e):k("Will use pannellum-3d-panorama default rotation speed of "+b);var f=a.getAttribute("yaw");e=0;f&&!isNaN(parseFloat(f))?
e=parseFloat(f):k("Will use pannellum-3d-panorama default initial yaw (initial horizontal rotation, in degrees) of "+e);var l=a.getAttribute("pitch");f=0;l&&!isNaN(parseFloat(l))?f=parseFloat(l):k("Will use pannellum-3d-panorama default initial pitch (vertical viewing pitch, in degrees) of "+f);var p=a.getAttribute("hfov");l=90;p&&!isNaN(parseFloat(p))?l=parseFloat(p):k("Will use pannellum-3d-panorama default initial hfov (horizontal field of view, in degrees) of "+l);p=a.getAttribute("type");"equirectangular"!==
p&&"cubemap"!==p&&"multires"!==p&&(p="equirectangular",k("Will use pannellum-3d-panorama default image type of '"+p+"'"));l=pannellum.viewer(a,{type:p,panorama:c,autoLoad:!0,yaw:e,pitch:f,hfov:l,compass:!1,showFullscreenCtrl:!1,draggable:!1});l.on("error",n=>{alert("The 3D rendering module reported an error: "+n+". Cannot continue.");h("pannellum Viewer reported an error: "+n+"' for the pannellum-3d-panorama with image src url "+c,!1)});a={za:a,pannellumViewer:l,ia:b,na:e,pitch:f,currentState:M.paused,
requestingPlayOrPause:void 0};Z.push(a);return a}}}function pb(a){a=a.getAttribute("src");if(!a)return 0;var b=a.indexOf("#t=");if(0>b)return 0;b=a.substr(b+3);var c=b.indexOf(",");b=0<=c?b.substr(0,c):b;c=parseFloat(b);isNaN(c)&&h("Could not parse the string '"+b+"' into a floating number! Cannot continue. The string was found in the video URL '"+a+"'.");return 0>c?(k("Video start offset "+c+" is invalid. Will use 0 instead."),0):c}function kb(a,b){var c=void 0,e=void 0,f=void 0;a=a.match(/\S+/g)||
[];for(var l=a.length;l--;){var p=a[l];"skippable"===p&&(f=!0,a.splice(l,1));p.startsWith("delay-")&&(c=bb("delay-",p),void 0!==c&&a.splice(l,1));p.startsWith("duration-")&&(e=bb("duration-",p),void 0!==e&&a.splice(l,1))}a=a.join();const n=Xa(a);void 0===c&&(c=n["--pp-delay"],void 0===c&&h("In class '"+a+"' : found no css style --pp-delay!"),delete n["--pp-delay"],c=qb(c,a));void 0===f&&(l=n["--pp-skippable"],"true"===l?f=!0:"false"===l?f=!1:void 0!==l&&h("In class '"+a+"', style  --pp-skippable: "+
l+";   : the only allowed values are [true, false], but found '"+l+"' !"));void 0===f&&(f=!1);p=n["--pp-transition-precision"];delete n["--pp-transition-precision"];var q=n["transition-property"];delete n["transition-property"];l={};for(var y in n)q&&q.includes(y)||"transition"===y||"-webkit-transition"===y||y.startsWith("transition-")||y.startsWith("-webkit-transition-")||y.startsWith("animation-")||y.startsWith("--pp")&&"--pp-media-state"!==y||(l[y]=n[y]);if(0===Object.keys(l).length&&!q)return k("In class '"+
a+"' : found no css transformations and no other styles! Ignoring it."),[];if(!q){0===Object.keys(l).length&&h("In class '"+a+"' : found no css transformations and no other styles!");if(e=$a(b))"play"===l["--pp-media-state"]&&(e.T=c),"pause"===l["--pp-media-state"]&&(e.ja=c);if(y=ab(b))"play"===l["--pp-media-state"]&&(y.ga=c),"pause"===l["--pp-media-state"]&&(y.ua=c);return[{transitionProperty:void 0,Z:a,D:b,video:e,X:y,N:l,O:f,G:[],j:0,c,P:!1,R:!1}]}y=e;void 0===y&&(e=n["transition-duration"],void 0===
e&&h("In class '"+a+"' : found no css style transition-duration!"),delete n["transition-duration"],y=rb(e,a));var G=q.split(",").map(r=>r.trim()).filter((r,A,C)=>C.indexOf(r)==A);e=[];for(const r of G){const A=[];Object.keys(n).forEach(C=>{if(C.startsWith("--pp-"+r+"-")){var J=C.substr(("--pp-"+r+"-").length);if("initial"==J||"from"==J||"00"==J||"0"==J)A.push({B:0,F:n[C]});else if(2==J.length||"100"===J){const F=parseInt(J,10);isNaN(F)||!isFinite(J)?h("Could not parse number from CSS style name '"+
C+"' Expected something like '--pp-"+r+"-50' but found '"+C+"'!"):(0>F||100<F)&&h("Could not parse number from CSS style name '"+C+"' Expecting a number from 0..100 but found "+F+" !");A.push({B:F,F:n[C]})}}});G=n[r];void 0===G&&h("In class '"+a+"' : found 'transition-property:"+r+"', but there is no "+r+":... style! cssStylesObj="+ra(n));A.push({B:100,F:G});A.sort(function(C,J){return C.B-J.B});0!==A[0].B&&h("In class '"+a+"' : found transition-property:"+q+", but there is no '--pp-"+q+"-initial' (or '--pp-"+
q+"-from' or '--pp-"+q+"-00') style!");100!==A[A.length-1].B&&h("Invalid logic!");G=sb(n,a,r,A,y,p);G.O=f;G.D=b;G.c=c;g("Generated "+q+" ppScript "+JSON.stringify(G));e.push(G)}if(0!==Object.keys(l).length){if(y=$a(b))"play"===l["--pp-media-state"]&&(y.T=c),"pause"===l["--pp-media-state"]&&(y.ja=c);if(p=ab(b))"play"===l["--pp-media-state"]&&(p.ga=c),"pause"===l["--pp-media-state"]&&(p.ua=c);e.push({transitionProperty:void 0,Z:a,D:b,video:y,X:p,N:l,O:f,G:[],j:0,c,P:!1,R:!1})}return e}function cb(a,
b,c,e){if((e=b["--pp"+c+"-"+e.B+"-timing-function"])||(e=b["--pp-"+c+"-timing-function"])||(e=b["--pp-transition-timing-function"])||(e=b["--pp-transition-timing-function"])||(e=b["transition-timing-function"]))return e;k("In class '"+a+"' : no transition timing function is defined: 'transition-timing-function', '--pp-transition-timing-function, '--pp-"+c+"-timing-function' ! Will use 'ease' instead.");return"ease"}function sb(a,b,c,e,f,l){var p=void 0!==l?parseInt(l,10):2;isNaN(p)&&h("In class '"+
b+"' : could not parse valueRoundingDigits from css style '--pp-transition-precision:"+l+"' into a number!");(0>p||5<p)&&h("In class '"+b+"' : could not parse valueRoundingDigits from css style '--pp-transition-precision:"+l+"' : Expected an integer number from 0 to 5 !");void 0===l&&(p=1E3>=f?2:1E3<f&&1E4>=f?3:4);l={Z:b,D:void 0,video:void 0,N:{},j:f,transitionProperty:c,Ua:c+" transition from "+e[0].F+" to "+e[e.length-1].F,I:void 0,fa:void 0,W:[101],Ta:void 0,P:!1,R:!1,Fa:void 0,Ga:void 0,aa:void 0};
if("transform"!==c){var n=e[0].F,q=e[e.length-1].F;-1!=n.indexOf(" ")&&h(c+" initial transition property value '"+n+" should not contain any spaces!");-1!=q.indexOf(" ")&&h(c+" transition property value '"+q+" should not contain any spaces!");var y="";n.endsWith("%")?(y="%",n=n.substring(0,n.length-1)):n.endsWith("px")?(y="px",n=n.substring(0,n.length-2)):n.endsWith("deg")?(y="deg",n=n.substring(0,n.length-3)):n.endsWith("rad")&&(y="rad",n=n.substring(0,n.length-3));var G="";q.endsWith("%")?(G="%",
q=q.substring(0,q.length-1)):q.endsWith("px")?(G="px",q=q.substring(0,q.length-2)):q.endsWith("deg")?(G="deg",q=q.substring(0,q.length-3)):q.endsWith("rad")&&(G="rad",q=q.substring(0,q.length-3));y!=G&&h("Found different suffix in initial transition value '"+n+y+"' from the suffix in transition value '"+q+G+"' : '"+y+"' vs '"+G+"' !");n=void 0;for(q=1;q<e.length;q++){y=e[q];var r=e[q-1];n=cb(b,a,c,y);var A=n.match(/\S+/g)||[];1!==A.length&&h("Expected transition-timing-function value '"+n+"' to have exactly one tokens, but found "+
A.length+" tokens!");A=transitionTimingFunctions[n];A||(k("In class '"+b+"' : no such transition timing function: '"+n+"' ! Will use 'ease' instead."),A=transitionTimingFunctions.ease);var C=y.F.match(/\S+/g)||[];1!=C.length&&h("Expected '"+y.F+" to exactly one 'tokens', but found "+C.length+" tokens.");C={G:[],c:f*r.B/100,j:f*(y.B-r.B)/100,I:ia=>ia+G};var J=parseFloat(r.F),F=parseFloat(y.F);C.G.push({Va:n,transitionTimingFunction:A,ya:J,Ea:F,Ba:p,va:Math.round((F-J)*Math.pow(10,p))/Math.pow(10,p)});
for(r=r.B;r<=y.B;r++)l.W[r]=C}for(a=0;100>=a;a++)void 0===l.W[a]&&h("Internal error: the ppInterval at offset "+a+" is undefined in ppScript for class name '"+b+"' !");l.fa=n}else{q=e[0].F;y=q.match(/\S+/g)||[];(0==y.length||6<y.length)&&h("We support 1 to 6 transform variables, but "+y.length+" were found in string '"+q+"' in css class '"+b+"' !");n=void 0;for(r=1;r<e.length;r++){A=e[r];C=e[r-1];n=cb(b,a,c,A);J=n.match(/\S+/g)||[];1!==J.length&&J.length!==y.length&&h("Expected transition-timing-function value '"+
n+"' to have 1 or "+y.length+" tokens, but found "+J.length+" tokens!");F=A.F.match(/\S+/g)||[];F.length!=y.length&&h("Expected '"+A.F+" to have equal amount of 'tokens' to '"+q+"' ! Compared "+F.length+" with "+y.length+".");F={G:void 0,c:f*C.B/100,j:f*(A.B-C.B)/100};for(var ja=C.B;ja<=A.B;ja++)l.W[ja]=F;ja=[];const ia=tb(ja,A.F,C.F,p,J,b);F.G=ja;0==F.G.length?F.I=()=>ia:1==F.G.length?F.I=aa=>ia.replace(wa,aa):2==F.G.length?F.I=(aa,ka)=>ia.replace(wa,aa).replace(ya,ka):3==F.G.length?F.I=(aa,ka,pa)=>
ia.replace(wa,aa).replace(ya,ka).replace(Ba,pa):4==F.G.length?F.I=(aa,ka,pa,za)=>ia.replace(wa,aa).replace(ya,ka).replace(Ba,pa).replace(Ha,za):5==F.G.length?F.I=(aa,ka,pa,za,Ia)=>ia.replace(wa,aa).replace(ya,ka).replace(Ba,pa).replace(Ha,za).replace(db,Ia):6==F.G.length?F.I=(aa,ka,pa,za,Ia,ub)=>ia.replace(wa,aa).replace(ya,ka).replace(Ba,pa).replace(Ha,za).replace(db,Ia).replace(vb,ub):h("Internal error!")}for(a=0;100>=a;a++)void 0===l.W[a]&&h("Internal error: the ppInterval at offset "+a+" is undefined in ppScript for class name '"+
b+"' !");l.fa=n}b=l.W[0];a=Ja(b,b.c);l.Aa=b.I(...a);b=l.W[100];a=Ja(b,l.j-b.c);l.Ka=b.I(...a);return l}function tb(a,b,c,e,f,l){const p=[],n=c.match(/\S+/g)||[],q=b.match(/\S+/g)||[];n.length!=q.length&&h("Error while comparing strings '"+c+"' and '"+b+"' : Expected both to have the same amount of 'tokens', however they don't match: "+n.length+" vs. "+q.length+" !");(0==q.length||6<q.length)&&h("We support 1 to 6 transform variables, but "+q.length+" were found in string '"+b+"' in css class '"+l+
"' !");var y=1;for(let C=0;C<q.length;C++){if(n[C]===q[C]){p.push(n[C]);continue}var G=eb(n[C],y);const J=eb(q[C],y);y++;G[1]!==J[1]&&h("Data from string '"+c+"'does not match with data from string '"+b+"': '"+G[1]+"' vs '"+J[1]+"' !");G=parseFloat(G[0]);const F=parseFloat(J[0]);var r=Math.round((F-G)*Math.pow(10,e))/Math.pow(10,e);const ja=1==f.length?f[0]:f[C];var A=transitionTimingFunctions[ja];A||(k("In class '"+l+"' : no such transition timing function: '"+ja+"' ! Will use 'linear' instead."),
A=transitionTimingFunctions.linear);a.push({transitionTimingFunction:A,ya:G,Ea:F,Ba:e,va:r});p.push(J[1])}return p.join(" ")}function rb(a,b){if("0"===a)var c=0;else if(a.endsWith("s"))c=parseInt(1E3*parseFloat(a.substr(0,a.length-1)),10);else if(a.endsWith("ms"))c=parseInt(parseFloat(a.substr(0,a.length-2)),10);else throw Error("In class '"+b+"' : could not parse transition-duration:"+a+"   : expected to find 's' or 'ms' at the end!");isNaN(c)&&h("In class '"+b+"' : could not parse durationMs from css style 'transition-duration:"+
a+"' into a number of millis! Invalid decimal!");0>c&&h("In class '"+b+"' : found negative value in css style 'transition-duration:"+a+"'!");return c}function qb(a,b){if("0"===a)var c=0;else if(a.endsWith("s"))c=parseInt(1E3*parseFloat(a.substr(0,a.length-1)),10);else if(a.endsWith("ms"))c=parseInt(parseFloat(a.substr(0,a.length-2)),10);else throw Error("In class '"+b+"' : could not parse --pp-delay:"+a+" : expected to find 's' or 'ms' at the end!");isNaN(c)&&h("In class '"+b+"' : could not parse delayMs from css style '--pp-delay:"+
a+"' into a number of millis! Invalid decimal!");0>c&&h("In class '"+b+"' : found negative value in css style '--pp-delay:"+a+"'!");return c}function bb(a,b){if(b&&b.startsWith(a)){a=b.substr(a.length).trim();if("0"===a)var c=0;else a.endsWith("ms")?c=parseInt(parseFloat(a.substr(0,a.length-2)),10):a.endsWith("s")?c=parseInt(1E3*parseFloat(a.substr(0,a.length-1)),10):(k("In class '"+b+"' : could not parse time from '"+a+"' : expected to find 's' or 'ms' at the end!"),c=void 0);isNaN(c)&&(k("In class '"+
b+"' : could not parse time from '"+a+"' into a number of millis! Invalid decimal!"),c=void 0);return c}}function eb(a,b){const c=a.indexOf("(");-1==c&&h("Cound not find '(' in '"+a+"' !");-1!=a.indexOf("(",c+1)&&h("Found more than one '(' in '"+a+"' !");const e=a.indexOf(")",c+1);-1==e&&h("Cound not find ')' after '(' in '"+a+"' !");-1!=a.indexOf(")",e+1)&&h("Found more than one ')' after '(' in '"+a+"' !");var f="",l=a.substring(c+1,e);0==l.length&&h("Found empty string in the (...) brackets in '"+
a+"' !");l.endsWith("%")?(f="%",l=l.substring(0,l.length-1)):l.endsWith("px")?(f="px",l=l.substring(0,l.length-2)):l.endsWith("deg")?(f="deg",l=l.substring(0,l.length-3)):l.endsWith("rad")&&(f="rad",l=l.substring(0,l.length-3));return[l,a.substring(0,c+1)+"["+b+"]"+f+a.substring(e)]}function fb(a){try{wb(a)}catch(b){alert("Invalid play script! Developer, see the browser console for more info."),h(b,!0)}S=a;requestAnimationFrame(fb)}function Ka(a){0!=a.P&&(a.ea?(Object.keys(a.ea).forEach(b=>{a.D.style[b]=
a.ea[b]}),a.P=!1):k("ppScript.initialStylesUndo is undefined!"))}function La(a){a.R||(a.transitionProperty&&(a.D.style[a.transitionProperty]=a.Ka,a.aa=void 0),a.R=!0)}function Ma(a){0!=a.R&&(a.transitionProperty&&(a.D.style[a.transitionProperty]=a.Aa,a.aa=void 0),a.R=!1)}function Ca(a,b){if(!a.P&&!a.ea){a.ea={};const c=window.getComputedStyle(a.D,null);Object.keys(a.N).forEach(e=>{void 0!=c[e]&&(a.ea[e]=c[e])})}a.P||(Object.keys(a.N).forEach(c=>{a.D.style[c]=a.N[c];a.video&&"--pp-media-state"===c&&
!b&&x&&("play"===a.N[c]?a.video.requestingPlayOrPause=!0:"pause"===a.N[c]&&(a.video.requestingPlayOrPause=!1));a.X&&"--pp-media-state"===c&&!b&&x&&("play"===a.N[c]?a.X.requestingPlayOrPause=!0:"pause"===a.N[c]&&(a.X.requestingPlayOrPause=!1))}),a.transitionProperty&&(a.D.style[a.transitionProperty]=a.Aa,a.aa=void 0),a.D.style["transition-duration"]="0",a.D.style["transition-timing-function"]="linear",a.transitionProperty&&(a.D.style["transition-property"]=a.transitionProperty),a.P=!0)}function Na(a,
b,c){0>b&&(k("Trying to play ppScript "+a.Z+"to negative progressMs="+b+" !"),b=0);if(b>a.j)k("Trying to play ppScript "+a.Z+"to progress beyond it's end: progressMs="+b+" vs. endMs="+a.j+" !");else if(a.R=!1,Ca(a,c),!a.transitionProperty)a.ta=b;else if(b!==a.ta){a.ta=b;var e=0===a.j?1:b/a.j,f=Math.floor(100*e);(c=a.W[f])||k("ppSubScript is null at "+f+" , "+e+" for ppScript "+a.Z+", progressMs="+b+", ppScript.durationMs="+a.j);b=Ja(c,b-c.c);b=c.I(...b);b!=a.aa&&(a.D.style[a.transitionProperty]=b,
a.aa=b)}}function Ja(a,b){const c=[a.G.length];b/=a.j;for(let e=0;e<a.G.length;e++){const f=a.G[e],l=f.transitionTimingFunction(b);c[e]=(f.ya+f.va*l).toFixed(f.Ba)}return c}function wb(a){if(da)g("mainRafLoop : requestingPlay"),B?D=a-(E||0):D=a-t+(E||0),w.playStarted(E||0,t),da=!1,E=void 0,ha&&(ha=!1,B=!B,D=2*a-t-D,qa=a-200+1),S=a;else if(ca)E=B?a-D:t-a+D,E=!E||0>E?0:E,D=void 0,w.playPaused(E,t),ca=!1,S=a;else if(ha&&(ha=!1,x?(B=!B,D=2*a-t-D,qa=a-200+1):k("Ignoring requestingPlayDirectionChange: nothing is currently playing.")),
0<N)void 0!=D&&x&&!I&&(D=D+a-S),Math.floor(S/1E3)!=Math.floor(a/1E3)&&k("mainRafLoop is waiting for "+N+" audio-s or video-s to start playing ..."),S=a;else if(void 0!=D&&x&&w.progressUpdate&&200<a-qa&&(w.progressUpdate(null,B?a-D:t-a+D,t,!1),qa=a),x||void 0!==z)if(void 0===z)if(a-=D,B){P&&0<a&&a<t&&(P=!1);for(let e=0;e<m.u.length;e++){const f=m.u[e].K;f.c+f.j<a?(Ca(f,!1),La(f)):f.c<=a?Na(f,a-f.c,!1):(Ma(f),Ka(f,a))}!I&&a>=t&&(I=!0,(U=x)&&B&&(x=!1,E=t,D=void 0,T(!1),w.playPaused(E,t)),w.progressUpdate&&
w.progressUpdate(null,t,t,!0),w.performanceFinished&&w.performanceFinished(),R(),setTimeout(()=>{Aa()},50));if(!I){for(var b of V)!0===b.requestingPlayOrPause?(b.requestingPlayOrPause=void 0,oa(b,b.videoStartOffsetInSeconds,!0)):!1===b.requestingPlayOrPause&&(b.requestingPlayOrPause=void 0,!1===b.videoDomElement.paused&&(b.videoDomElement.pause(),b.currentState=M.paused));for(var c of Z)!0===c.requestingPlayOrPause?(c.requestingPlayOrPause=void 0,c.pannellumViewer.stopAutoRotate(),c.pannellumViewer.stopMovement(),
c.pannellumViewer.setYaw(c.na,!1),c.pannellumViewer.startAutoRotate(c.ia,c.pitch)):!1===c.requestingPlayOrPause&&(c.requestingPlayOrPause=void 0,c.pannellumViewer.stopAutoRotate(),c.pannellumViewer.stopMovement())}}else{I&&0<a&&a<t&&(I=!1);for(b=0;b<m.u.length;b++)c=m.u[m.u.length-b-1].K,t-(c.c+c.j)>a?(Ca(c,!1),La(c)):t-c.c>=a?Na(c,t-a-c.c,!1):(Ma(c),Ka(c,a));!P&&a>=t&&(P=!0,(U=x)&&0==B&&(x=!1,E=0,D=void 0,T(!1),w.playPaused(E,t)),w.progressUpdate&&w.progressUpdate(null,0,t,!0),w.performanceFinishedBackward&&
w.performanceFinishedBackward(),R(),setTimeout(()=>{Aa()},50))}else{b=z;b=0>b?0:b;b=b>t?t:b;x?D=B?a-z:a-t+z:E=z;w.progressUpdate&&w.progressUpdate(null,z,t,!0);z=void 0;Va();for(a=0;a<m.u.length;a++)c=m.u[a].K,c.c+c.j<b?(Ca(c,!0),La(c)):c.c<=b?Na(c,b-c.c,!1):(Ma(c),Ka(c,b));!I&&b>=t?(I=!0,(U=x)&&B&&(x=!1,E=t,D=void 0,T(!1),w.playPaused(E,t)),w.progressUpdate&&w.progressUpdate(null,t,t,!0),w.performanceFinished&&w.performanceFinished(),R(),setTimeout(()=>{Aa()},50)):!P&&0>=b&&(P=!0,(U=x)&&0==B&&(x=
!1,E=0,D=void 0,T(!1),w.playPaused(E,t)),w.progressUpdate&&w.progressUpdate(null,0,t,!0),w.performanceFinishedBackward&&w.performanceFinishedBackward(),R(),setTimeout(()=>{Aa()},50))}else S=a}const Sa=Date.now(),Ea=d.logLevel&&!isNaN(d.logLevel)&&window.console?parseInt(d.logLevel,10):2,xa=this,Oa={stageId:void 0,pompousEventNotifier:void 0,autoStart:"true",autoRestartAtEnd:!1,autoRestartAtStart:!1,startBlank:!0,designWidth:1920,designHeight:1080,stageBorderSize:0,autoStartAudioMuted:!0,webfonts:void 0,
loadNImagesAhead:10,logLevel:2,stageStyle:"background-color:black;"};(function(a,b){for(const c in a)b[c]=a[c]})(d,Oa);(function(a,b){for(const e in b)if("stageStyle"!==e&&"webfonts"!==e&&"audio"!==e&&"pompousEventNotifier"!==e)if("autoStart"===e&&("true"===a[e]||"false"===a[e]||"jump_to_1st_nonskippable"===a[e]||"jump_to_time_0"===a[e]))b[e]=a[e];else if(void 0!==b[e]&&void 0!==a[e])switch(typeof b[e]){case "boolean":"true"===a[e]?b[e]=!0:"false"===a[e]?b[e]=!1:k("Invalid boolean argument in URL paramerter '"+
e+"'='"+a[e]+"'! Valid values are 'true', 'false'. Skipping it.");break;case "string":k("Setting string params in the URL is way too dangerous for code injection attacks. We don't allow it.");break;case "number":var c=a[e];isNaN(c)?k("Invalid numeric argument in URL paramerter '"+e+"'='"+a[e]+"'! Skipping it."):b[e]=parseInt(c,10);break;case "undefined":break;default:k("We don't support the type of URL paramerter '"+e+"'='"+a[e]+"'! Skipping it.")}})(getPompousUrlParams(),Oa);const v=Oa;v.stageId||
h("Player option 'stageId' not found!",!0);var w=void 0;v.pompousEventNotifier&&"object"===typeof v.pompousEventNotifier?w=v.pompousEventNotifier:k("Invalid 'pompousEventNotifier' option. Expected a JS object.");w||(k("The 'pompousEventNotifier' presentation option is not set! Will use the default 'skin' PompousNoNavigation, which does nothing! This presentation will not play properly. Make sure the 'pompousEventNotifier' presentation option is set to some other skin; see the available skins in file pp-skins.js."),
w=new jb({stageId:v.stageId}));var Ya=!0,K=void 0,gb=1,va=void 0,fa=void 0,m={},Y=!1,hb=!1,x=!1,B=!0,Ga=!1,da=!1,ca=!1,ha=!1,z=void 0,I=!1,P=!1,U=!1,D=void 0,S=void 0,qa=void 0,E=void 0,t=-1,Fa=!1,Ta=Date.now(),X=!1;const V=[],Z=[];var N=0;const M=Object.freeze({paused:1,ha:2,ma:3}),wa=/\[1\]/g,ya=/\[2\]/g,Ba=/\[3\]/g,Ha=/\[4\]/g,db=/\[5\]/g,vb=/\[6\]/g;this.getPompousEventNotifier=()=>w;this.init=()=>{try{if(hb)k("init() was already called. Will not call it again.");else{hb=!0;v.stageId||h("Player option 'stageId' not found!",
!0);if("string"===typeof v.stageId){v.stageId.startsWith("#")||v.stageId.startsWith(".")||(k("Rewriting stageId '"+v.stageId+"' to '#"+v.stageId+"'."),v.stageId="#"+v.stageId);var a=document.querySelectorAll(v.stageId);0===a.length&&h("No such stage element in the DOM document: '"+v.stageId+"'!");1<a.length&&k("More than one html elements match the stageId '"+v.stageId+"'! Will use the 1st of them, which may not be right.");K=a[0];Qa.has(K)?h("A PompousPlayer is already created for stageId '"+v.stageId+
"'! Each stageId should have one PompousPlayer. Did you try to initialize the PompousPlayer both via Javascript code and via the data-pompous-player-stage html attribute? Please use one or the other approach. Cannot continue.",!0):Qa.set(K,xa)}else if(v.stageId instanceof HTMLElement)if(K=v.stageId,Qa.has(K)){var b=Da(K);h("A PompousPlayer is already created for stageId '"+b+"'! Each stageId should have one PompousPlayer.  Did you try to initialize the PompousPlayer both via Javascript code and via the data-pompous-player-stage html attribute? Please use one or the other approach.Cannot continue.",
!0)}else Qa.set(K,xa);else h("Player option 'stageId' is neither a DOM HTMLElement nor a string!");K.hasAttribute("data-pompous-player-stage")||K.setAttribute("data-pompous-player-stage","");w.initStarted(v,xa);var c=document.createElement("div");c.setAttribute("data-description","Hi Mom, I need this div in full screen mode.");K.parentNode.replaceChild(c,K);c.appendChild(K);g("Setting stage to width="+v.designWidth+", height="+v.designHeight);K.style.width=v.designWidth+"px";K.style.height=v.designHeight+
"px";Modernizr.csstransforms||h("csstransforms are not supported by this browser! Cannot continue.");g("Auto-start is '"+v.autoStart+"'.");if(v.webfonts&&"object"===typeof v.webfonts){const r=v.webfonts;g("Loading web fonts "+JSON.stringify(r));r.Ra=void 0;r.Oa=void 0;r.Ma=void 0;r.Na=void 0;if(r.google||r.typekit||r.custom||r.fontdeck||r.monotype)var e=new Promise(function(A){r.active=()=>{A("webFontsLoaded success")};r.Pa=()=>{A("webFontsLoaded success via inactive callback")}});WebFont.load(r)}else v.webfonts&&
k("Invalid 'webfonts' option. Expected a JS object.");var f=v.stageStyle;f&&(g("Adding/Replacing following stage css styles: '"+f+"'"),K.setAttribute("style",K.getAttribute("style")+"; "+f));m.M=[];var l=K.querySelectorAll("[data-classes]");0==l.length&&(alert("Could not find anything to play!"),h("Could not find anything to play!"));c=0;f=[];a={id:0};for(b=0;b<l.length;b++){var p=l[b];if(1==p.nodeType){var n="actor"+c;p.setAttribute("data-actor-id",n);var q={id:n,xa:p.getAttribute("data-class-initial")||
"",Sa:p.getAttribute("class")||"",ra:c};m.M.push(q);q.u=[];ma(p,q,a);c++;for(n=0;n<q.u.length;n++)f.push(q.u[n])}}0<Z.length&&"undefined"===typeof pannellum&&h("Found "+Z.length+" pannellum-3d-panorama html elements, but the pannellum library is not present! To fix, please include a <script src=...the.panellum.js.lib.js...>\x3c/script>. See https://pannellum.org/documentation/examples/simple-example/ for more info.");f.sort(function(r,A){return r.c-A.c});m.u=f;m.J=ba(f);m.b=sa(m.J);g("script.animationsGroupedByDelay="+
JSON.stringify(m.J));nb();if(!v.startBlank){var y=m.J[0];for(l=0;l<y.u.length;l++)p=la(y.u[l].ra),na("initially-visible",p,!1)}if(!0!==v.autoStart&&"true"!==v.autoStart||!v.autoStartAudioMuted){for(const r of V)r.videoDomElement.muted=!1;X=!1}else{for(const r of V)r.videoDomElement.muted=!0;X=!0}w.audioMutedUnmuted(X);p=[];e&&p.push(e);if(0!==v.loadNImagesAhead){const r=imagesLoaded(K,{background:"div"});var G=new Promise(A=>{r.on("always",function(){A("imagesLoaded success")})});r.on("progress",
(A,C,J)=>{C.isLoaded||k("Could not load image '"+C.img.src+"' !");w.imageLoaded(C.img,A.images.length,J)})}else G=Promise.resolve("imagesLoaded immediate success, nothing to do : loadNImagesAhead="+v.loadNImagesAhead);p.push(G);for(const r of V){if(3<r.videoDomElement.readyState)continue;const A=new Promise(C=>{r.videoDomElement.addEventListener("canplay",()=>{C(r.videoDomElement.tagName+" promise resolved in 'canplay' event.")},!1)});A.then(()=>{});r.videoDomElement.load();p.push(A)}for(const r of Z){const A=
new Promise(C=>{r.pannellumViewer.on("load",()=>{C("pannellum-3d-panorama load promise succeded")})});p.push(A)}for(const r of p)r.then(A=>{g("Promise successfully finished with value "+A)}).catch(A=>{k("a Promise failed with an error: "+A)});Promise.all(p).then(r=>{g("All promises finished with value '"+r+"'");Y=!0;w.initFinished(v,t);if("boolean"===typeof v.autoStart)v.autoStart?(g("autoStart is "+v.autoStart+"; calling play(true)"),ta(!0)):E=0;else if("string"===typeof v.autoStart)switch(v.autoStart){case "true":g("autoStart is "+
v.autoStart+"; calling play(true)");ta(!0);break;case "false":E=0;break;case "jump_to_1st_nonskippable":xa.playNextAnimation();break;case "jump_to_time_0":xa.jumpToTime(0,!1);break;default:k("Invalid 'autoStart' option: '"+v.autoStart+"' ! Choosing 'false' for you."),E=0}else k("Invalid 'autoStart' option: '"+v.autoStart+"' ! Choosing 'false' for you."),E=0});L();requestAnimationFrame(r=>{qa=r;g("Starting recursiveRequestAnimationFrame()");fb(r)})}}catch(r){alert("Invalid play script! Developer, see the browser console for more info."),
h(r,!1)}};this.getStageElement=()=>K;this.getOptions=()=>v;this.playPreviousAnimation=()=>B?this.h():this.a();this.playPreviousAnimationBackward=()=>{B&&(x&&(D=2*S-t-D,qa=S-200+1),ha=B=!1);return this.a()};this.a=()=>{if(!Y)return k("Requesting play-previous before init finished. Ignoring it."),0;if(0<N)return k("One or more videos are currently loading. The player is blocked. Ignoring this 'play previous animation' request."),0;if(B)return k("This code is meant to be used while playing backward (either during play or pause), but here playingForward is true!"),
0;R();var a=this.getCurrentPlayTimeCountedFromLeftStart();if(P)return 0;I&&(I=!1,x||!0!==U||(da=x=!0,ca=!1));if(a>=t)return a=m.b.length-1,!x&&!U&&1<a&&a--,z=m.b[a].c+m.b[a].H,H(),O(m.b[a].w),z;for(let c=m.b.length-1;0<=c;c--){if(c==m.b.length-1&&a>m.b[c].c+m.b[c].H)return z=m.b[c].c+m.b[c].H,H(),O(m.b[c].w),z;var b=0==c?0:m.b[c-1].c+m.b[c-1].H;const e=m.b[c].c+m.b[c].H;g("In playPreviousAnimationWhilePlayingBackward: i="+c+" : playDurationMs="+a+"; playingForward="+B+"; Looking at range "+b+" to "+
e+" (inclusive)");if(b<a&&e>=a)return z=b,H(),O(0==c?-1:m.b[c-1].w),z}0<a?(z=0,H(),O(-1)):g("Cannot play any more backwards!");return 0};this.h=()=>{if(!Y)return k("Requesting play-previous before init finished. Ignoring it."),0;if(0<N)return k("One or more videos are currently loading. The player is blocked. Ignoring this 'play previous animation' request."),0;if(!B)return k("This code is meant to be used while playing forward (either during play or pause), but here playingForward is false!"),0;
R();const a=this.getCurrentPlayTimeCountedFromLeftStart();if(P)return 0;I&&(I=!1,x||!0!==U||(da=x=!0,ca=!1));for(let c=m.b.length-1;0<=c;c--){if(a>=t)return z=m.b[c].c,H(),O(m.b[c].w),z;if(c==m.b.length-1&&a>m.b[c].c){var b=m.b[c].c;1E3>a-b?(z=0==c?0:m.b[c-1].c,H(),O(0==c?-1:m.b[c-1].w)):(z=m.b[c].c,H(),O(m.b[c].w));return z}b=0==c?0:m.b[c-1].c;if(b<a&&m.b[c].c>=a)return 1E3>a-b?(z=1>=c?0:m.b[c-2].c,H(),O(1>=c?-1:m.b[c-2].w)):(z=0==c?0:m.b[c-1].c,H(),O(0==c?-1:m.b[c-1].w)),z}0<a?(z=0,H(),O(-1)):g("Cannot play any more backwards!");
return 0};this.playNextAnimationForward=()=>{B||(x&&(D=2*S-t-D,qa=S-200+1),B=!0,ha=!1);return this.playNextAnimation()};this.playNextAnimation=()=>B?this.g():this.f();this.g=()=>{if(!Y)return k("Requesting play-next before init finished. Ignoring it."),0;if(0<N)return k("One or more videos are currently loading. The player is blocked. Ignoring this 'play next animation' request."),0;B||k("This code is meant to be used while playing forward (either during play or pause), but here playingForward is false!");
const a=x?S-D:z||E||0;if(I)return t;P&&(P=!1,x||!0!==U||(da=x=!0,ca=!1));R();for(let b=0;b<m.b.length;b++){if(0==b&&a<m.b[0].c)return z=m.b[0].c,H(),O(m.b[0].w),z;if((0==b?0:m.b[b-1].c)<=a&&m.b[b].c>a)return z=m.b[b].c,H(),O(m.b[b].w),z}if(a<t)return z=t,H(),O(m.J.length),z;g("Cannot play any furher!");return t};this.f=()=>{if(!Y)return k("Requesting play-next before init finished. Ignoring it."),0;if(0<N)return k("One or more videos are currently loading. The player is blocked. Ignoring this 'play next animation' request."),
0;B&&k("This code is meant to be used while playing backward (either during play or pause), but here playingForward is true!");if(I)return t;R();const a=this.getCurrentPlayTimeCountedFromLeftStart();if(P)return P=!1,x||!0!==U||(da=x=!0,ca=!1),z=m.b[0].c+m.b[0].H,H(),O(m.b[0].w),z;if(a>=t)return t;for(let c=m.b.length-1;0<=c;c--){if(c==m.b.length-1&&a>m.b[c].c+m.b[c].H)return z=t,H(),I=!0,U=x,z;var b=0==c?0:m.b[c-1].c+m.b[c-1].H;const e=m.b[c].c+m.b[c].H;if(b<a&&e>=a)return 1E3>e-a?(z=c==m.b.length-
1?t:m.b[c+1].c+m.b[c+1].H,H(),O(c==m.b.length-1?m.b[c].w:m.b[c+1].w)):(z=e,H(),O(m.b[c].w)),z}0<a&&(z=0,H(),O(-1));return 0};this.jumpTo=function(a,b){this.jumpToTime(a*t/100,b)};this.jumpBy=function(a,b){Y?0<N?k("One or more videos are currently loading. The player is blocked. Ignoring this 'jump-to' request."):this.jumpToTime((x?B?S-D:t-S+D:E)+a,b):k("Requesting jump-by before init finished. Ignoring it.")};this.jumpToTime=function(a,b){Y?0<N?k("One or more videos are currently loading. The player is blocked. Ignoring this 'jump-to' request."):
(0>a&&(a=0),a>t&&(a=t),z=a,(I||P)&&z<t?(I&&(I=!1),P&&(P=!1),x||!0!==U||(da=x=!0,ca=!1),H()):!x&&b?ta(void 0):H()):k("Requesting jump-to-time before init finished. Ignoring it.")};this.getCurrentPlayTime=()=>x?S-D:B?E:t-E;this.getCurrentPlayTimeCountedFromLeftStart=()=>x?B?S-D:t-S+D:E||0;this.getTotalPlayDuration=()=>t;this.restartFromBeginning=()=>{Y?0<N?k("One or more videos are currently loading. The player is blocked. Ignoring this 'restart from beginning' request."):ua():k("Requesting play/pause/resume/rewind before init finished. Ignoring it.")};
this.togglePlayPauseResume=a=>{if(Y)if(0<N)k("One or more videos are currently loading. The player is blocked. Ignoring this 'toggle play/pause/resume' request.");else{if(R(),!I||!a)if(x){da=x=!1;ca=!0;for(const b of V)b.requestingPlayOrPause=void 0,!1===b.videoDomElement.paused&&(b.videoDomElement.pause(),b.currentState=M.paused,W(w,"videoPlayPaused"));for(const b of Z)b.requestingPlayOrPause=void 0,b.pannellumViewer.stopAutoRotate(),b.pannellumViewer.stopMovement()}else ta(a)}else k("Requesting play/pause/resume before init finished. Ignoring it.")};
this.togglePlayPauseResumeRewind=a=>{Y?0<N?k("One or more videos are currently loading. The player is blocked. Ignoring this 'toggle play/pause/resume/rewind' request."):(R(),I&&a?this.restartFromBeginning():this.togglePlayPauseResume(a)):k("Requesting play/pause/resume/rewind before init finished. Ignoring it.")};this.whatNonskippableAnimationIsAt=a=>{for(let b=0;b<m.b.length;b++){const c=m.b[b];for(let e=0;e<c.u.length;e++){const f=c.u[e].K;if(0!==f.j&&(B&&a>=f.c&&a<f.c+f.j||!B&&a>f.c&&a<=f.c+f.j))return a-=
f.c,{cssClassName:f.Z,durationMs:f.j,delayMs:f.c,overallTransitionTimingStr:f.fa,playedDurationMs:a,remainingPlayTimeMs:B?f.j-a:a}}}};this.isPaused=()=>!x;this.isForward=()=>B;this.changePlayDirection=a=>{x?!B&&a?ha=!0:B&&!a&&(ha=!0):!B&&a?B=!0:B&&!a&&(B=!1)};this.isAudioOn=()=>this.hasAudioOrVideos()?!X:!1;this.toggleAudioOnOff=()=>{if(this.hasAudioOrVideos()){X=!X;var a=x?S-D:z||E||0;for(const b of V)if(X)X&&(b.videoDomElement.muted=!0);else{b.videoDomElement.muted=!1;const c=B&&a>=b.T&&a<b.ja;
!0===b.videoDomElement.paused&&c&&oa(b,(a-b.T)/1E3+b.videoStartOffsetInSeconds,!0)}w.audioMutedUnmuted(X)}};this.hasAudioOrVideos=()=>0<V.length;this.isAnyVideoBuffering=()=>0<N;this.isReady=()=>Y;this.isInFullScreen=()=>document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement;this.toggleFullScreen=
()=>{var a=K.parentNode;if(this.isInFullScreen())document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{a.Ja?a.Ja():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen();a=screen.width;var b=screen.height;a=a/b<v.designWidth/v.designHeight?
(a-2*v.stageBorderSize)/v.designWidth:(b-2*v.stageBorderSize)/v.designHeight;a=Math.round(100*a)/100;xa.scaleStage(a);Modernizr.touchevents&&window.scrollTo(0,1)}};this.scaleStage=a=>{gb=a;K.style.transform="translate(-50%, -50%) scale("+a+")";g("Scaled stage to scale="+a)};this.getStageScale=()=>gb}}window.PompousPlayer=ib;
class jb{constructor(d){!(this.a=d.stageId)||this.a.startsWith("#")||this.a.startsWith(".")||(this.a="#"+this.a);$(this.a)}initStarted(){}initFinished(){}imageLoaded(){}waitingForVideoToPlay(){}videoPlayStarted(){}videoPlayPaused(){}videoPlayErrored(){}progressUpdate(){}onPrevOrNextAnimationChange(){}reset(){}playStarted(){}playPaused(){}performanceFinished(){}performanceFinishedBackward(){}audioMutedUnmuted(){}fullScreenChanged(){}toggleShowHideShareMenu(){}copyPresentationUrlToClipboard(){}shareViaGmail(){}};/*
 Pompous Player v26 Skins.

 @license Copyright (c) 2020 Pompous Media LLC. All rights reserved.
 Subject to the terms at 
 https://github.com/TorZidan/PompousPlayer/blob/master/STANDARD_LICENSE 
 and https://www.pompousphotos.com/commercial_license

 There are two ways to use the PompousPlayer: 
 - use files pp-dependencies.js and pp-player.min.js and pp-skins.js 
 - use file pp-all-in-one.min.js

 The code is annotated so that it can be minified/compiled using the google
 closure compiler, but there is no need to do that: file pp-player.min.js
 already includes this code, minified.
*/
class xb{constructor(d,g){let k=null,h=null;d="string"===typeof d?document.querySelector(d):d;d.addEventListener("touchstart",u=>{k=u.touches[0].clientX;h=u.touches[0].clientY},!1);d.addEventListener("touchmove",u=>{d!==document&&u.preventDefault();if(k&&h){var Q=k-u.touches[0].clientX;u=h-u.touches[0].clientY;100<Math.abs(Q)+Math.abs(u)&&(Math.abs(Q)>Math.abs(u)?0<Q?g("left"):g("right"):0<u?g("up"):g("down"),h=k=null)}},!1)}}window.PompousMobileTouchListener=xb;
class yb{constructor(d){const g={linear:L=>L,ease:BezierEasing(.1,.25,1,.25),"ease-in":BezierEasing(0,.42,1,1),"ease-out":BezierEasing(0,0,1,.58),"ease-in-out":BezierEasing(0,.42,1,.58)};let k=void 0,h=void 0,u=!1,Q=void 0,ba=null;const sa=d.getStageElement(),ma=d.getStageScale()*sa.offsetWidth;let la=!1,na=!1,H=void 0,oa=void 0,O=void 0,R=void 0;sa.addEventListener("touchstart",L=>{d.isReady()&&!d.isAnyVideoBuffering()&&(u=!0,Q=void 0,ba=L.touches[0].clientX,H?clearTimeout(H):(na=d.isAudioOn(),la=
d.isPaused()),d.isPaused()||d.togglePlayPauseResume(void 0),d.isAudioOn()&&d.toggleAudioOnOff())},!1);sa.addEventListener("touchmove",L=>{L.preventDefault();if(d.isReady()&&!d.isAnyVideoBuffering()){var T=ba-L.touches[0].clientX;if(!(u&&5>=Math.abs(T)))if(u){u=!1;L=0<=T;d.changePlayDirection(L);const ua=d.getCurrentPlayTimeCountedFromLeftStart();let ea=d.whatNonskippableAnimationIsAt(ua);Q=void 0===(ea?ea.Ia:void 0)||void 0!==H&&R===L?0<=T?d.playNextAnimation():d.playPreviousAnimation():ua;ea=d.whatNonskippableAnimationIsAt(Q);
ea||(console.warn("Cound not find what's playing at touch-start play position "+Q+" millis. Choosing some default values."),ea={j:1E3,fa:"linear"});T=ea.j||1E3;oa=T*ba/ma;O=T*(ma-ba)/ma;k=g[ea.fa]||g.linear;h=k(1);R=L}else ba&&Q&&(d.isForward()?(L=oa*k(T/ba)/h,d.jumpToTime(Q+L,!1)):(L=k((ma-ba- -1*T)/(ma-ba))/h,d.jumpToTime(Q-O*(1-L),!1)))}},!1);sa.addEventListener("touchend",()=>{if(d.isReady()&&!d.isAnyVideoBuffering()){u=!1;Q=void 0;var L=d.getCurrentPlayTimeCountedFromLeftStart();L=(L=d.whatNonskippableAnimationIsAt(L))?
L.Ia:void 0;!d.isPaused()||void 0===L&&la||d.togglePlayPauseResume(void 0);void 0!==L?H=setTimeout(()=>{R=H=void 0;la&&!d.isPaused()&&d.togglePlayPauseResume(void 0);na&&!d.isAudioOn()&&d.toggleAudioOnOff()},L+50):(R=H=void 0,la&&!d.isPaused()&&d.togglePlayPauseResume(void 0),na&&!d.isAudioOn()&&d.toggleAudioOnOff())}},!1)}}window.PompousCarouselMobileTouchListener=yb;function zb(d){d=Math.round(d/1E3);const g=d%60;return Math.floor(d/60)+":"+(10>g?"0":"")+g}
class Ab{constructor(d){this.ka=this.L=this.S=this.ba=this.h=this.v=this.o=this.C=this.ca=this.s=this.A=this.i=this.l=this.g=this.a=this.m=this.f=void 0;this.pa=this.la=!1;this.oa=0;this.V=this.Y=!1;this.U=!0;this.qa=this.da=!1;ppDocumentReady(()=>{var g=d.stageId;!g||"string"!==typeof g||g.startsWith("#")||g.startsWith(".")||(g="#"+g);this.m=$(g);if(0===this.m.length)throw alert("Invalid play script! Developer, see the browser console for more info."),Error("No such stage element in the DOM document: '"+
g+"'!");this.a=this.m.find(".pp-selector-video-like-navigation");this.g=this.a.find(".pp-selector-play-pause-resume-button");this.l=this.a.find(".pp-selector-prev-animation-button");this.i=this.a.find(".pp-selector-next-animation-button");this.A=this.a.find(".pp-selector-rewind-to-beginning-button");this.s=this.a.find(".pp-selector-audio-on-off-button");this.ca=this.a.find(".pp-selector-full-screen-button");this.C=this.a.find(".pp-selector-status-bar");this.o=this.a.find(".pp-selector-progress-container");
this.v=this.a.find(".pp-selector-progress-track");this.h=this.a.find(".pp-selector-progress-handle");this.ba=this.a.find(".pp-selector-nav-current-play-time");this.S=this.a.find(".pp-selector-share-button");this.L=this.a.find(".pp-selector-share-menu");this.a.css("opacity",1);this.l.css("cursor","default");this.l.css("opacity",.5);this.i.css("cursor","default");this.i.css("opacity",.5);this.A.html("<i class='fas fa-fw'></i>");this.A.css("cursor","default");this.g.html("<i class='fas fa-play'></i>");
this.g.css("cursor","default");this.g.css("opacity",.5);!this.S.length||!0!==d.hideShareButton&&"true"!==getPompousUrlParams().hideShareButton?this.S.css("cursor","pointer"):this.S.css("display","none");!0!==d.hideAudioButton&&"true"!==getPompousUrlParams().hideAudioButton||this.s.css("display","none");!0===d.hideFullScreenButton||"true"===getPompousUrlParams().hideFullScreenButton?this.ca.css("display","none"):this.ca.css("cursor","pointer");["touchstart","touchmove","touchend"].forEach(h=>{this.a.get(0).addEventListener(h,
u=>{u.stopPropagation()})});["mousedown","touchstart"].forEach(h=>{this.h.get(0).addEventListener(h,u=>{u.stopPropagation();this.da=!0;this.Y&&(this.f.togglePlayPauseResume(void 0),this.qa=!0)})});["mousemove","touchmove"].forEach(h=>{this.m.get(0).addEventListener(h,u=>{this.da&&this.f&&(u=(u.pageX-this.o.offset().left)/this.f.getStageScale(),10>u&&(u=0),u>this.o.width()/this.f.getStageScale()-2&&(u=this.o.width()/this.f.getStageScale()),this.h.css("left",u))})});this.h.get(0).addEventListener("click",
h=>{h.stopPropagation()});this.o.get(0).addEventListener("click",h=>{if(this.f){h=h.pageX-this.o.offset().left;10>h?h=0:h>this.o.width()-2&&(h=this.o.width());var u=100*h/this.o.width();this.h.css("left",h+"");this.f.jumpTo(u,null)}});["mouseup","touchend"].forEach(h=>{document.addEventListener(h,u=>{if(this.da){u=u.pageX-this.o.offset().left;10>u?u=0:u>this.o.width()-2&&(u=this.o.width());const Q=100*u/this.o.width();this.h.css("left",u+"");this.f.jumpTo(Q,this.qa)}this.qa=this.da=!1})});this.a.get(0).onmouseenter=
()=>{this.la=!0};this.a.get(0).onmouseleave=()=>{this.la=!1};this.m.get(0).onmousemove=()=>{this.pa||(this.pa=!0,setTimeout(()=>{this.pa=!1},1E3),clearTimeout(this.ka),this.a.css("opacity",1),this.ka=setTimeout(()=>{!this.la&&this.Y&&this.a.css("opacity",0)},5E3))};document.addEventListener("click",h=>{(h=h.target)&&h instanceof Node&&0<this.L.length&&!this.L.get(0).contains(h)&&this.S.length&&!this.S.get(0).contains(h)&&this.L.css("display","none")});var k;$("meta[property='pp:presentation_id']").length?
k=document:k=this.m.get(0);k.addEventListener("keydown",h=>{clearTimeout(this.ka);this.a.css("opacity",1);this.ka=setTimeout(()=>{!this.la&&this.Y&&this.a.css("opacity",0)},5E3);"s"!==h.key&&this.L.css("display","none");if(!(h.ctrlKey||h.altKey||h.shiftKey))switch(h.key){case " ":this.f.togglePlayPauseResume(!0);break;case "ArrowLeft":this.f.playPreviousAnimation();break;case "ArrowRight":this.f.playNextAnimation();break;case "b":this.f.togglePlayPauseResume(!1);break;case "m":this.f.toggleAudioOnOff();
break;case "r":this.f.restartFromBeginning();break;case "s":this.toggleShowHideShareMenu(h);break;case "f":this.f.jumpBy(100,!1);break;case "d":this.f.jumpBy(-100,!1)}})})}initStarted(d,g){this.f=g;0!==d.loadNImagesAhead?this.C.html("Loading presentation ... "+this.oa+" images out of "+d.loadNImagesAhead+" loaded"):this.C.html("Loading presentation ... ")}initFinished(d,g){this.m.find(".pp-selector-video-like-splash").css("visibility","hidden");this.C.html("");this.g.html("<i class='fas fa-play'></i>");
this.g.css("cursor","pointer");this.g.css("opacity",1);this.i.css("cursor","pointer");this.i.css("opacity",1);this.ba.text("0:00");this.m.find(".pp-selector-nav-slash").text("/");this.m.find(".pp-selector-nav-total-play-time").text(zb(g));this.f.hasAudioOrVideos()?(this.f.isAudioOn()?this.s.html("<i class='fas fa-volume-up'></i>"):this.s.html("<i class='fas fa-volume-mute'></i>"),this.s.css("cursor","pointer")):(this.s.html(""),this.s.css("cursor","default"))}playStarted(d,g){this.Y=!0;this.g.html("<i class='fas fa-pause'></i>");
d=0>d?0:d;d=d>g?g:d;g=100*d/g+"%";this.v.css("width",g);this.h.css("left",g);this.v.css("transition","none");this.h.css("transition","none");this.ba.text(zb(d))}playPaused(d,g){this.Y=!1;this.g.html("<i class='fas fa-play'></i>");d=0>d?0:d;d=d>g?g:d;g=100*d/g+"%";this.v.css("width",g);this.h.css("left",g);this.v.css("transition","none");this.h.css("transition","none");this.ba.text(zb(d))}waitingForVideoToPlay(){this.C.html("Loading video ...")}videoPlayStarted(){this.C.html("")}videoPlayPaused(){this.C.html("")}videoPlayErrored(d){d&&
"AbortError"!==d.name&&"NotAllowedError"!==d.name?this.C.html("Could not play video!"):this.C.html("")}progressUpdate(d,g,k,h){this.da?(this.v.css("transition","none"),this.h.css("transition","none")):(d&&this.C.html(d),g===k?(this.V=!0,this.i.css("cursor","default"),this.i.css("opacity",.5)):this.V&&g<k&&(this.V=!1,this.i.css("cursor","pointer"),this.i.css("opacity",1),this.g.css("cursor","pointer"),this.g.css("opacity",1),this.A.html("<i class='fas fa-fw'></i>"),this.A.css("cursor","default")),
0===g?(this.U=!0,this.l.css("opacity",.5),this.l.css("cursor","default")):this.U&&0<g&&(this.U=!1,this.l.css("opacity",1),this.l.css("cursor","pointer")),0<=g&&g<=k&&(d=100*g/k+"%",this.v.css("width",d),this.h.css("left",d),h?(this.v.css("transition","none"),this.h.css("transition","none")):(this.v.css("transition","width 200ms linear"),this.h.css("transition","left 200ms linear")),this.ba.text(zb(g))))}imageLoaded(d,g){this.oa++;this.C.html("Loading presentation ... "+this.oa+" images out of "+g+
" loaded")}onPrevOrNextAnimationChange(d,g,k){-1==g?(this.U=!0,this.l.css("cursor","default"),this.l.css("opacity",.5)):(this.U=!1,this.l.css("cursor","pointer"),this.l.css("opacity",1));g>k-1?(this.V=!0,this.i.css("cursor","default"),this.i.css("opacity",.5),this.g.css("cursor","default"),this.g.css("opacity",.5),this.A.html("<i class='fas fa-sync-alt'></i>"),this.A.css("cursor","pointer")):(this.V=!1,this.i.css("opacity",1),this.g.css("opacity",1),this.Y?(this.m.find(".pp-selector-play").css("display",
"none"),this.m.find(".pp-selector-pause").css("display","block")):(this.m.find(".pp-selector-play").css("display","block"),this.m.find(".pp-selector-pause").css("display","none")),this.m.find(".pp-selector-rewind").css("display","none"))}reset(d,g){this.Y=!1;this.g.html("<i class='fas fa-play'></i>");this.g.css("opacity",1);this.U=!0;this.V=!1;this.l.css("cursor","default");this.l.css("opacity",.5);this.i.css("cursor","pointer");this.i.css("opacity",1);this.A.html("<i class='fas fa-fw'></i>");this.A.css("cursor",
"default");d?(g?this.s.html("<i class='fas fa-volume-mute'></i>"):this.s.html("<i class='fas fa-volume-up'></i>"),this.s.css("cursor","pointer")):this.s.html("");this.v.css("width","0%");this.h.css("left","0%");this.v.css("transition","none");this.h.css("transition","none")}performanceFinished(){this.V=!0;this.i.css("cursor","default");this.i.css("opacity",.5);this.g.css("cursor","default");this.g.css("opacity",.5);this.A.html("<i class='fas fa-sync-alt'></i>");this.A.css("cursor","pointer")}performanceFinishedBackward(){this.U=
!0;this.l.css("opacity",.5);this.l.css("cursor","default")}audioMutedUnmuted(d){d?this.s.html("<i class='fas fa-volume-mute'></i>"):this.s.html("<i class='fas fa-volume-up'></i>")}fullScreenChanged(d){d?this.ca.html("<i class='fas fa-compress'></i>"):this.ca.html("<i class='fas fa-expand'></i>")}copyPresentationUrlToClipboard(){const d=document.createElement("textarea");d.value=window.location.href;d.setAttribute("readonly","");d.style.position="absolute";d.style.left="-9999px";document.body.appendChild(d);
d.select();document.execCommand("copy");document.body.removeChild(d)}shareViaGmail(){var d="\n"+document.title+"\n"+window.location.href+"\n";d="https://mail.google.com/mail/?view=cm&fs=1&su="+encodeURIComponent("Check out this slideshow")+"&body="+encodeURIComponent(d);window.open(d,"_blank")}toggleShowHideShareMenu(){this.S.length&&"none"===this.S.css("display")||("none"==this.L.css("display")?(this.L.css("display","block"),this.L.find("button").attr("data-url",window.location.href),this.L.find("button").attr("data-title",
document.title)):this.L.css("display","none"))}}window.PompousVideoLikeNavigation=Ab;
class Bb{constructor(d){this.i=this.m=this.o=this.f=this.h=this.l=this.A=this.a=this.g=void 0;this.v=this.C=!1;this.s=!0;ppDocumentReady(()=>{var g=d.stageId;!g||"string"!==typeof g||g.startsWith("#")||g.startsWith(".")||(g="#"+g);this.a=$(g);if(0===this.a.length)throw alert("Invalid play script! Developer, see the browser console for more info."),Error("No such stage element in the DOM document: '"+g+"'!");this.A=this.a.find(".pp-selector-play-pause-resume-button");this.l=this.a.find(".pp-selector-prev-animation-button");
this.h=this.a.find(".pp-selector-next-animation-button");this.f=this.a.find(".pp-selector-audio-on-off-button");this.o=this.a.find(".pp-selector-full-screen-button");this.a.find(".pp-selector-status-bar");this.m=this.a.find(".pp-selector-share-button");this.i=this.a.find(".pp-selector-share-menu");this.A.css("opacity",.5);this.l.css("opacity",.5);this.h.css("opacity",.5);!this.m.length||!0!==d.hideShareButton&&"true"!==getPompousUrlParams().hideShareButton||this.m.css("display","none");!0!==d.hideAudioButton&&
"true"!==getPompousUrlParams().hideAudioButton||this.f.css("display","none");!0!==d.hideFullScreenButton&&"true"!==getPompousUrlParams().hideFullScreenButton||this.o.css("display","none");document.addEventListener("click",h=>{(h=h.target)&&h instanceof Node&&0<this.i.length&&!this.i.get(0).contains(h)&&this.m.length&&!this.m.get(0).contains(h)&&this.i.css("display","none")});["touchstart","touchmove","touchend"].forEach(h=>{this.A.get(0).addEventListener(h,u=>{u.stopPropagation()});this.l.get(0).addEventListener(h,
u=>{u.stopPropagation()});this.h.get(0).addEventListener(h,u=>{u.stopPropagation()});this.f.get(0).addEventListener(h,u=>{u.stopPropagation()});this.o.get(0).addEventListener(h,u=>{u.stopPropagation()});this.m.length&&this.m.get(0).addEventListener(h,u=>{u.stopPropagation()})});var k;$("meta[property='pp:presentation_id']").length?k=document:k=this.a.get(0);k.addEventListener("keydown",h=>{"s"!==h.key&&this.i.css("display","none");if(!(h.ctrlKey||h.altKey||h.shiftKey))switch(h.key){case " ":this.g.togglePlayPauseResume(!0);
break;case "ArrowLeft":this.g.playPreviousAnimation();break;case "ArrowRight":this.g.playNextAnimation();break;case "b":this.g.togglePlayPauseResume(!1);break;case "m":this.g.toggleAudioOnOff();break;case "r":this.g.restartFromBeginning();break;case "s":this.toggleShowHideShareMenu(h);break;case "f":this.g.jumpBy(100,!1);break;case "d":this.g.jumpBy(-100,!1)}})})}initStarted(d,g){this.g=g}initFinished(){this.a.find(".pp-selector-carousel-splash").css("visibility","hidden");this.A.css("opacity",1);
this.h.css("opacity",1);this.g.hasAudioOrVideos()?(this.g.isAudioOn()?(this.f.find(".pp-selector-audio-on").css("display","block"),this.f.find(".pp-selector-audio-off").css("display","none")):(this.f.find(".pp-selector-audio-on").css("display","none"),this.f.find(".pp-selector-audio-off").css("display","block")),this.f.css("cursor","pointer")):(this.f.html(""),this.f.css("visibility","hidden"))}imageLoaded(){}onPrevOrNextAnimationChange(d,g,k){-1==g?(this.s=!0,this.l.css("opacity",.5)):(this.s=!1,
this.l.css("opacity",1));g>k-1?(this.v=!0,this.a.find(".pp-selector-play").css("display","none"),this.a.find(".pp-selector-pause").css("display","none"),this.a.find(".pp-selector-rewind").css("display","block"),this.h.css("opacity",.5)):(this.v=!1,this.h.css("opacity",1),this.A.css("opacity",1),this.C?(this.a.find(".pp-selector-play").css("display","none"),this.a.find(".pp-selector-pause").css("display","block")):(this.a.find(".pp-selector-play").css("display","block"),this.a.find(".pp-selector-pause").css("display",
"none")),this.a.find(".pp-selector-rewind").css("display","none"))}reset(d,g){this.C=!1;this.a.find(".pp-selector-play").css("display","block");this.a.find(".pp-selector-pause").css("display","none");this.a.find(".pp-selector-rewind").css("display","none");this.A.css("opacity",1);this.v=!1;this.s=!0;this.l.css("opacity",.5);this.h.css("opacity",1);d?g?(this.f.find(".pp-selector-audio-on").css("display","none"),this.f.find(".pp-selector-audio-off").css("display","block")):(this.f.find(".pp-selector-audio-on").css("display",
"block"),this.f.find(".pp-selector-audio-off").css("display","none")):(this.f.html(""),this.f.css("visibility","hidden"))}playStarted(){this.C=!0;this.a.find(".pp-selector-play").css("display","none");this.a.find(".pp-selector-pause").css("display","block");this.a.find(".pp-selector-rewind").css("display","none")}playPaused(){this.C=!1;this.a.find(".pp-selector-play").css("display","block");this.a.find(".pp-selector-pause").css("display","none")}waitingForVideoToPlay(){}videoPlayStarted(){}videoPlayPaused(){}videoPlayErrored(){}performanceFinished(){this.v=
!0;this.a.find(".pp-selector-play").css("display","none");this.a.find(".pp-selector-pause").css("display","none");this.a.find(".pp-selector-rewind").css("display","block");this.h.css("opacity",.5)}performanceFinishedBackward(){this.s=!0;this.l.css("opacity",.5)}progressUpdate(d,g,k){g===k?(this.v=!0,this.h.css("opacity",.5)):this.v&&g<k&&(this.v=!1,this.h.css("opacity",1));0===g?(this.s=!0,this.l.css("opacity",.5)):this.s&&0<g&&(this.s=!1,this.l.css("opacity",1))}audioMutedUnmuted(d){d?(this.f.find(".pp-selector-audio-on").css("display",
"none"),this.f.find(".pp-selector-audio-off").css("display","block")):(this.f.find(".pp-selector-audio-on").css("display","block"),this.f.find(".pp-selector-audio-off").css("display","none"))}fullScreenChanged(d){d?(this.o.find(".pp-selector-full-screen-on").css("display","none"),this.o.find(".pp-selector-full-screen-off").css("display","block")):(this.o.find(".pp-selector-full-screen-on").css("display","block"),this.o.find(".pp-selector-full-screen-off").css("display","none"))}toggleShowHideShareMenu(){this.m.length&&
"none"===this.m.css("display")||("none"==this.i.css("display")?(this.i.css("display","block"),this.i.find("button").attr("data-url",window.location.href),this.i.find("button").attr("data-title",document.title)):this.i.css("display","none"))}copyPresentationUrlToClipboard(){const d=document.createElement("textarea");d.value=window.location.href;d.setAttribute("readonly","");d.style.position="absolute";d.style.left="-9999px";document.body.appendChild(d);d.select();document.execCommand("copy");document.body.removeChild(d)}shareViaGmail(){var d=
"\n"+document.title+"\n"+window.location.href+"\n";d="https://mail.google.com/mail/?view=cm&fs=1&su="+encodeURIComponent("Check out this slideshow")+"&body="+encodeURIComponent(d);window.open(d,"_blank")}}window.PompousCarouselNavigation=Bb;
class Cb{constructor(d){this.a=this.f=void 0;ppDocumentReady(()=>{var g=d.stageId;!g||"string"!==typeof g||g.startsWith("#")||g.startsWith(".")||(g="#"+g);this.f=$(g);if(0===this.f.length)throw alert("Invalid play script! Developer, see the browser console for more info."),Error("No such stage element in the DOM document: '"+g+"'!");this.a=this.f.find(".pp-selector-no-navigation-current-state-div")})}initStarted(){}initFinished(){this.f.find(".pp-selector-video-like-splash").css("visibility","hidden");
this.f.find(".pp-selector-carousel-splash").css("visibility","hidden");this.f.find(".pp-selector-no-navigation-splash").css("visibility","hidden");this.a.text("INIT_FINISHED")}imageLoaded(){}waitingForVideoToPlay(){}videoPlayStarted(){}videoPlayPaused(){}videoPlayErrored(){}progressUpdate(){}onPrevOrNextAnimationChange(){}reset(){}playStarted(){this.a.text("PLAYING")}playPaused(){this.a.text("PAUSED")}performanceFinished(){this.a.text("PERFORMANCE_FINISHED")}performanceFinishedBackward(){this.a.text("PERFORMANCE_FINISHED_BACKWARD")}audioMutedUnmuted(){}fullScreenChanged(){}toggleShowHideShareMenu(){}copyPresentationUrlToClipboard(){}shareViaGmail(){}}
window.PompousBlankNavigation=Cb;
